var de=Object.defineProperty,se=Object.defineProperties;var ue=Object.getOwnPropertyDescriptors;var Z=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var J=(d,n,t)=>n in d?de(d,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):d[n]=t,Q=(d,n)=>{for(var t in n||(n={}))ne.call(n,t)&&J(d,t,n[t]);if(Z)for(var t of Z(n))ie.call(n,t)&&J(d,t,n[t]);return d},q=(d,n)=>se(d,ue(n));import{y as ce,b as p,w as D,d as G,o as S,a as F,f as e,z as me,D as V,c as x,e as r,i as b,m as k,B as z,C as L,s as U,P as R,j as K,E as pe,F as H,x as A,_ as Y,G as ve,p as Oe,H as ke,k as y,I as fe,l as P,J as we,K as te,L as ae,M as ee,N as Ie,O as ye,Q as ge,R as le,S as be,h as E,T as he,U as _e,V as Se,W as Ve,X as De,Y as Te,Z as We,$ as Ce,a0 as Ae,a1 as xe,A as $e,a2 as X,a3 as Ue,n as oe,a4 as Fe}from"./index.fb487db7.js";const re={name:"ReceiptsDropdown",props:["furnanceId"],emits:["update:modelValue"],setup(d,{emit:n}){const t=d,o=ce(),i=p(),a=p(!1),O=p([]),s=p([]);D(()=>t.furnanceId,async()=>{a.value=!0,w()}),D(i,()=>{n("update:modelValue",i.value)});function w(){s.value=[],console.log(O.value);for(var f=0;f<O.value.length;f++)O.value[f].furnance.furnanceId==t.furnanceId&&s.value.push(O.value[f])}G(()=>{g(),w()});async function g(){O.value=await o.getReceiptsList()}return(f,c)=>(S(),F(e(me),{modelValue:i.value,"onUpdate:modelValue":c[0]||(c[0]=l=>i.value=l),options:s.value,optionLabel:"name",optionValue:"receiptId",placeholder:"Re\xE7ete Se\xE7iniz",showClear:a.value},null,8,["modelValue","options","showClear"]))}},Ne={name:"SelectedCustomerOrderTable",props:["modelValue","selectedCustomerOrder","workOrderItem","dialogType"],emits:["update:modelValue"],setup(d,{emit:n}){const t=d,o=p(!1),i=p([]),a=p("workOrderItem"),O=p([]),s=p(!1);function w(f){console.log(f),s.value=!0,i.value=f}D(()=>t.selectedCustomerOrder,()=>{var c;console.log("props.selectedCustomerOrder",t.selectedCustomerOrder);let f=O.value.findIndex(l=>{var v;return l.customerOrderItemId==((v=t.selectedCustomerOrder)==null?void 0:v.customerOrderItemId)});O.value.splice(f,1);for(let l=0;l<((c=t.selectedCustomerOrder)==null?void 0:c.length);l++)O.value.push(t.selectedCustomerOrder[l])}),D(()=>t.workOrderItem,()=>{var f,c;if(console.log("props.workOrderItem",t.workOrderItem),console.log("props.dialogType :>> ",t.dialogType),O.value=[],t.dialogType==V.UPD){for(let l=0;l<((f=t.workOrderItem)==null?void 0:f.length);l++){let v=t.workOrderItem[l].workOrderItemId;O.value.push(t.workOrderItem[l].customerOrderItem);let W=O.value.findIndex(h=>h.customerOrderItemId==t.workOrderItem[l].customerOrderItem.customerOrderItemId);O.value[W].workOrderItemId=v}console.log("customers.value :>> ",O.value)}if(t.dialogType==V.ADD)for(let l=0;l<((c=t.workOrderItem)==null?void 0:c.length);l++)O.value.push(t.selectedCustomerOrder[l]);n("update:modelValue",o.value)}),D(()=>t.modelValue,()=>{o.value=t.modelValue,n("update:modelValue",o.value)});function g(f){if(f.workOrderItemStatusId>=50)return"tp-cusDetTable-bg"}return(f,c)=>(S(),x(H,null,[r(e(K),{value:O.value,rowGroupMode:"subheader",groupRowsBy:"customerOrderItemId",sortMode:"single",sortField:"customerOrderItemId",sortOrder:1,scrollable:"",responsiveLayout:"scroll",scrollHeight:"400px",rowClass:g},{default:b(()=>[r(e(k),{field:"customer.companyName",header:"M\xFC\u015Fteri Ad\u0131"},{body:b(l=>{var v;return[z(L((v=l.data)==null?void 0:v.customer.companyName),1)]}),_:1}),r(e(k),{field:"customerOrderId",header:"M\xFC\u015Fteri Sipari\u015F Numaras\u0131"},{body:b(l=>{var v;return[z(L((v=l.data)==null?void 0:v.customerOrderItemId),1)]}),_:1}),r(e(k),{field:"customerOrderItemStatus",header:"M\xFC\u015Fteri Sipari\u015F Durumu"},{body:b(l=>{var v;return[z(L((v=l.data)==null?void 0:v.customerOrderItemStatus.name),1)]}),_:1}),r(e(k),{field:"drawingNo",header:"Sipari\u015F \xC7izim Numaras\u0131"},{body:b(l=>{var v;return[z(L((v=l.data)==null?void 0:v.drawingNo),1)]}),_:1}),r(e(k),{header:"Raporlar"},{body:b(l=>[r(e(U),{icon:e(R).CHART_BAR,class:"p-button-info p-button-rounded p-button-outlined mr-2",onClick:v=>w(l.data)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["value"]),r(pe,{modelValue:s.value,"onUpdate:modelValue":c[0]||(c[0]=l=>s.value=l),reportDialogType:a.value,workOrderItemId:i.value.workOrderItemId},null,8,["modelValue","reportDialogType","workOrderItemId"])],64))}},Ee=()=>{async function d(o){try{await A.post("workOrderItem/DeleteWorkOrderItem?workOrderItemId="+o)}catch(i){console.log(i)}}async function n(o){try{console.log("workOrder\u0131TEM : ",o[0]),await A.post("workOrderItem/AddWorkOrderItem",o[0])}catch(i){console.log(i)}}async function t(){var i;try{var o=await A.get("workOrderItem/fetchWorkOrderItem");return(i=o.data)==null?void 0:i.value}catch(a){console.log(a)}}return{deleteWorkOrderItem:d,addWorkOrderItem:n,fetchWorkOrderItem:t}};const B=d=>(te("data-v-16ed8e35"),d=d(),ae(),d),Le=B(()=>y("h3",null,"Se\xE7ilen M\xFC\u015Fteri Sipari\u015Fi",-1)),Me={class:"col-12 sm:col-6"},Re=B(()=>y("h3",{style:{}},"M\xFC\u015Fteri Sipari\u015F Numaras\u0131 :",-1)),Pe={style:{padding:"1rem","font-size":"small"}},ze={class:"tp-divtag"},Ke=B(()=>y("h3",null,"M\xFC\u015Fteri Sipari\u015F Se\xE7im Ekran\u0131",-1)),Be={class:"p-input-icon-left"},Ge=B(()=>y("i",{class:"pi pi-search"},null,-1)),He={class:"orders-subtable"},je=B(()=>y("h5",null,"Sipari\u015F Detaylar\u0131",-1)),Qe={name:"WorkOrderSideBar",props:["modelValue","dialogType","workOrderItem","workOrderId"],emits:["update:modelValue","selectedCustomerOrderItem","selectedTable"],setup(d,{emit:n}){const t=d,o=Ee(),i=ve(),a=p(!0),O=p([]),s=p([{selectedCustomerOrderItem:[]}]),w=p([]),g=p({global:{value:"",matchMode:Oe.CONTAINS}});async function f(){if(t.dialogType==V.ADD&&n("selectedCustomerOrderItem",v()),t.dialogType==V.UPD){let h=Object.assign({},v());await o.addWorkOrderItem(h),ee("\u0130\u015F Emri Alt Kalemi Eklendi.")}}D(()=>t.workOrderItem,async()=>{if(n("update:modelValue",a.value),t.dialogType==V.ADD){let h=[];h=s.value,s.value=[];for(let m=0;m<h.length;m++)h[m].customerOrderStatusId>30||s.value.push(h[m])}t.dialogType==V.UPD&&(s.value.selectedCustomerOrderItem=t.workOrderItem)},{immediate:!0}),D(()=>t.modelValue,()=>{a.value=t.modelValue,n("update:modelValue",a.value)});function c(h){if(h.customerOrderItemStatusId>=40)return"tp-dataTag-bg"}const l=h=>{w.value.push(h.data)};function v(){let h=p([]);if(t.dialogType==V.ADD)return s.value.forEach(m=>{var u;(u=m.selectedCustomerOrderItem)==null||u.forEach(I=>{h.value.push(q(Q({},I),{workOrderItemStatusId:20,name:m.name,remark:m.remark,customerOrderId:m.customerOrderId}))})}),h.value;if(t.dialogType==V.UPD)return s.value.forEach(m=>{var u;(u=m.selectedCustomerOrderItem)==null||u.forEach(I=>{h.value.push(q(Q({},I),{workOrderItemStatusId:20,name:m.name,remark:m.remark,customerOrderId:m.customerOrderId,workOrderId:t.workOrderId}))})}),h.value}async function W(h){let m=w.value.findIndex(u=>u.customerOrderItemId==h.customerOrderItemId);w.value.splice(m,1),t.dialogType==V.ADD&&s.value[0].selectedCustomerOrderItem.splice(m,1),t.dialogType==V.UPD&&(s.value.selectedCustomerOrderItem.splice(m,1),await o.deleteWorkOrderItem(h.workOrderItemId)),ee(h.workOrderItemId+"Numaral\u0131 \u0130\u015F Emri Alt Kalemi Silindi"),n("selectedCustomerOrderItem",s.value.selectedCustomerOrderItem)}return G(async()=>{s.value=await i.getCustomerOrderList(11)}),(h,m)=>(S(),F(e(we),{visible:a.value,"onUpdate:visible":m[5]||(m[5]=u=>a.value=u),baseZIndex:1e3,modal:!1,style:{width:"45vw","min-width":"300px"},class:"p-dialog-left"},{default:b(()=>[Le,r(e(U),{label:"Se\xE7imi Tamamla",class:"p-button-success",icon:"pi pi-save",onClick:m[0]||(m[0]=u=>f())}),(S(!0),x(H,null,ke(s.value.selectedCustomerOrderItem?s.value.selectedCustomerOrderItem:w.value,u=>(S(),x("div",Me,[r(e(fe),{severity:"success",class:"mr-10",style:{"font-size":"smaller !important"}},{default:b(()=>[Re,y("div",Pe,L(u.customerOrderItemId),1),y("div",ze,[r(e(U),{class:"tp-buttontag p-button-rounded p-button-danger",onClick:I=>W(u),label:"X"},null,8,["onClick"])])]),_:2},1024)]))),256)),Ke,r(e(K),{value:s.value,loading:e(i).customerOrderLoading.value,expandedRows:O.value,"onUpdate:expandedRows":m[3]||(m[3]=u=>O.value=u),dataKey:"customerOrderId",responsiveLayout:"scroll",filters:g.value,"onUpdate:filters":m[4]||(m[4]=u=>g.value=u),globalFilterFields:["customerOrderItemId","name"]},{expansion:b(u=>[y("div",He,[je,r(e(K),{value:u.data.customerOrderItems,selection:u.data.selectedCustomerOrderItem,"onUpdate:selection":I=>u.data.selectedCustomerOrderItem=I,metaKeySelection:!1,selectionMode:"multiple",dataKey:"customerOrderItemId",responsiveLayout:"scroll",filters:g.value,"onUpdate:filters":m[2]||(m[2]=I=>g.value=I),globalFilterFields:["customerOrderItemId","name"],onRowSelect:l,rowClass:c},{default:b(()=>[r(e(k),{field:"customerOrderItemId",header:"Id",sortable:""}),r(e(k),{field:"customer.companyName",header:"M\xFC\u015Fteri Ad\u0131",sortable:""}),r(e(k),{field:"name",header:"Sipari\u015F Ad\u0131",sortable:""}),r(e(k),{field:"drawingNo",header:"\xC7izim Numaras\u0131",sortable:""}),r(e(k),{field:"pieceNumber",header:"Par\xE7a Numaras\u0131",sortable:""}),r(e(k),{field:"pieceWeight",header:"Par\xE7a A\u011F\u0131rl\u0131\u011F\u0131",sortable:""}),r(e(k),{field:"hrc",header:"\xD6nceki Sertlik(Hrc)",sortable:""}),r(e(k),{field:"hb",header:"\xD6nceki Sertlik(Hb)",sortable:""}),r(e(k),{field:"createDate",header:"Olu\u015Fturma Tarihi",sortable:""}),r(e(k),{field:"materialQuality.name",header:"Malzeme Kalitesi",sortable:""}),r(e(k),{field:"treatmentType.name",header:"\u0130\u015Flem Tipi",sortable:""}),r(e(k),{field:"registrationDate",header:"Kay\u0131t Tarihi",sortable:""})]),_:2},1032,["value","selection","onUpdate:selection","filters"])])]),default:b(()=>[y("span",Be,[Ge,r(e(P),{modelValue:g.value.global.value,"onUpdate:modelValue":m[1]||(m[1]=u=>g.value.global.value=u),placeholder:"Ara..."},null,8,["modelValue"])]),r(e(k),{field:"customerOrderId",header:"Sipari\u015F Numaras\u0131",sortable:""}),r(e(k),{field:"name",header:"Sipari\u015F Detay Ad\u0131",sortable:""}),r(e(k),{field:"customerOrderStatus.name",header:"Sipari\u015F Durumu",sortable:""}),r(e(k),{expander:!0,headerStyle:"width: 3rem"})]),_:1},8,["value","loading","expandedRows","filters"])]),_:1},8,["visible"]))}};var qe=Y(Qe,[["__scopeId","data-v-16ed8e35"]]);const j=()=>{p();const d=p(!1);async function n(c){var l;try{return d.value=!0,(l=(await A.get("workOrder/GetWorkOrder?workOrderId="+c)).data)==null?void 0:l.value}catch(v){console.log(v)}finally{d.value=!1}}async function t(c){try{d.value=!0,await A.post("workorder/AddWorkOrder",c)}catch(l){console.log(l)}finally{d.value=!1}}async function o(c){var l;try{d.value=!0;let v=Ie(c);return(l=(await A.post("workOrder/GetWorkOrderList",{statusId:c})).data)==null?void 0:l.value}catch(v){console.log(v)}finally{d.value=!1}}async function i(c){try{d.value=!0,await A.post("workOrder/UpdateWorkOrder",c)}catch(l){console.log(l)}finally{d.value=!1}}async function a(){var c;try{d.value=!0;let l;return l=await A.get("workOrder/GetWorkOrderStatus"),(c=l.data)==null?void 0:c.result}catch(l){console.log(l)}finally{d.value=!1}}async function O(c){try{d.value=!0,await A.post("workOrder/DeleteWorkOrder?workOrderId="+c)}catch(l){console.log(l)}finally{d.value=!1}}async function s(){var c;try{return d.value=!0,(c=(await A.get("workOrder/GetWorkOrderStatusCount")).data)==null?void 0:c.result.value}catch(l){console.log(l)}finally{d.value=!1}}async function w(c){try{return(await A.post("workOrder/CheckWorkOrder",{workOrderId:c})).data}catch(l){console.log(l)}}async function g(c){var l;try{let v=await A.get("workOrder/GetLevelTwoData?workOrderId="+c);return console.log(v.data),(l=v.data)==null?void 0:l.value}catch(v){console.log(v)}}async function f(c){var l;try{return(l=(await A.post("workOrder/GetWorkOrderWithDetailList",ye(c))).data)==null?void 0:l.value}catch(v){console.log(v)}}return{useWorkOrderApi:j,getWorkOrder:n,addWorkOrder:t,getWorkOrderList:o,updateWorkOrder:i,deleteWorkOrder:O,getWorkOrderStatus:a,getWorkOrderStatusCount:s,checkWorkOrder:w,workOrderLoading:d,levelTwoGetWorkOrderData:g,getAll:f}},Xe={name:"LevelTwoDataTable",props:["workOrderId"],setup(d){const n=d,t=j(),o=p([]);async function i(){o.value=await t.levelTwoGetWorkOrderData(n.workOrderId),console.log("levelTwoWOrkOrderData.value :>> ",o.value)}return G(async()=>{await i()}),ge(()=>{o.value=[]}),(a,O)=>(S(),F(e(K),{value:o.value,responsiveLayout:"scroll"},{default:b(()=>[r(e(k),{field:"name",header:"\u0130\u015F Emri Ad\u0131"}),r(e(k),{field:"ifReferenceSpeed",header:"Akt\xFCel H\u0131z"}),r(e(k),{field:"ifActualSpeed",header:"Akt\xFCel H\u0131z"}),r(e(k),{field:"ifCurrent",header:"Ak\u0131m"}),r(e(k),{field:"ifFreq",header:"Frekans"}),r(e(k),{field:"ifGuc",header:"G\xFC\xE7"}),r(e(k),{field:"ifVoltage",header:"Voltaj"}),r(e(k),{field:"ifPower",header:"G\xFC\xE7(Power)"}),r(e(k),{field:"remarkOperator",header:"Operat\xF6r Notu"})]),_:1},8,["value"]))}},Ye={name:"LevelTwoDialog",props:["modelValue","workOrderId"],emits:["update:modelValue"],setup(d,{emit:n}){const t=d,o=p(!1);return D(o,async()=>{n("update:modelValue",o.value)}),D(()=>t.modelValue,()=>{o.value=t.modelValue,n("update:modelValue",o.value)}),(i,a)=>(S(),F(e(le),{header:"Seviye 2 Bilgileri",visible:o.value,"onUpdate:visible":a[0]||(a[0]=O=>o.value=O),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw"}},{default:b(()=>[r(Xe,{workOrderId:t.workOrderId},null,8,["workOrderId"])]),_:1},8,["visible"]))}};const M=d=>(te("data-v-754521fe"),d=d(),ae(),d),Ze={class:"p-grid p-fluid"},Je={class:"p-field p-col-12"},er=M(()=>y("label",{for:"workOrderNumber"},"\u0130\u015F Emri Numaras\u0131",-1)),rr={key:0,class:"p-error"},tr={class:"p-field p-col-12"},ar=M(()=>y("label",{for:"Name"},"\u0130\u015F Emri Ad\u0131",-1)),lr={key:0,class:"p-error"},or={class:"p-field p-col-12"},dr=M(()=>y("label",{for:"remark"},"\u0130\u015F Emri A\xE7\u0131klamas\u0131",-1)),sr={key:0,class:"p-error"},ur={class:"grid"},nr={key:0,class:"p-field col",style:{"margin-top":"2rem"}},ir={for:"workOrderStatusId"},cr={class:"p-field col"},mr=M(()=>y("label",{for:"Furnace"},"F\u0131r\u0131n",-1)),pr={key:1,class:"p-field col"},vr=M(()=>y("label",{for:"receipts"},"Re\xE7eteler",-1)),Or={key:2,class:"p-field col"},kr=M(()=>y("label",{for:"receipts"},"Re\xE7ete Se\xE7mek \u0130\xE7in F\u0131r\u0131n Se\xE7iniz",-1)),fr={class:"p-field p-col-12"},wr=M(()=>y("label",{for:""},"Se\xE7ilen M\xFC\u015Fteri Sipari\u015Fleri",-1)),Ir={key:0,class:"p-field p-col-12",style:{"text-align":"center",color:"yellowgreen"}},yr={name:"WorkOrderForm",props:["workOrderFormType","showDialogAndSidebar","workOrderModel","workOrderId"],emits:["saveWorkOrder","closeWorkOrder"],setup(d,{expose:n,emit:t}){const o=d,i=p(!1),a=p({workOrderItems:[]}),O=p(!1),s=j(),w=p(!1),g=p([]),f=p(!1),c=p(!1);D(()=>o.showDialogAndSidebar,async()=>{w.value=o.showDialogAndSidebar,o.workOrderFormType==V.ADD&&(a.value={}),o.workOrderFormType==V.UPD&&(f.value=!0,a.value=(await s.getWorkOrder(o.workOrderId))[0],console.log("workOrderModel.value :>> ",a.value),a.value.workOrderStatusId==20&&(i.value=!0))},{immediate:!0}),n({saveItem:v}),D(()=>a.value.furnanceId,()=>{f.value=!0});function l(m){g.value={},g.value=m,a.value.workOrderItems=m,console.log("item :>> ",m)}async function v(){if(!a.value.name||!a.value.remark||!a.value.workOrderNumber){O.value=!0,t("closeWorkOrder",!1);return}if(o.workOrderFormType==V.ADD&&(i.value==!0?a.value.workOrderStatusId=20:a.value.workOrderStatusId=10,a.value.createdDate=be(Date.now()),await s.addWorkOrder(a.value)),o.workOrderFormType==V.UPD){let m=a.value.workOrderStatusId;a.value.workOrderStatusId>=30?a.value.workOrderStatusId=m:i.value==!0?a.value.workOrderStatusId=20:a.value.workOrderStatusId=10,await s.updateWorkOrder(a.value)}t("closeWorkOrder",!0)}function W(){w.value==!0?console.log("sidebar zaten a\xE7\u0131k"):w.value=!0}function h(){c.value=!0}return(m,u)=>(S(),x(H,null,[y("div",Ze,[y("div",Je,[er,r(e(P),{modelValue:a.value.workOrderNumber,"onUpdate:modelValue":u[0]||(u[0]=I=>a.value.workOrderNumber=I)},null,8,["modelValue"]),O.value&&!a.value.workOrderNumber?(S(),x("small",rr,"L\xFCtfen De\u011Fer Giriniz")):E("",!0)]),y("div",tr,[ar,r(e(P),{modelValue:a.value.name,"onUpdate:modelValue":u[1]||(u[1]=I=>a.value.name=I)},null,8,["modelValue"]),O.value&&!a.value.name?(S(),x("small",lr,"L\xFCtfen De\u011Fer Giriniz")):E("",!0)]),y("div",or,[dr,r(he,{modelValue:a.value.remark,"onUpdate:modelValue":u[2]||(u[2]=I=>a.value.remark=I)},null,8,["modelValue"]),O.value&&!a.value.remark?(S(),x("small",sr,"L\xFCtfen De\u011Fer Giriniz")):E("",!0)]),y("div",ur,[a.value.workOrderStatusId<=20||o.workOrderFormType!=e(V).UPD?(S(),x("div",nr,[y("label",ir,"\u0130\u015F Emri Durumu : "+L(i.value?"Ba\u015Flamad\u0131":"Taslak"),1),r(e(_e),{style:{"margin-left":"1rem"},modelValue:i.value,"onUpdate:modelValue":u[3]||(u[3]=I=>i.value=I),binary:!0},null,8,["modelValue"])])):E("",!0),y("div",cr,[mr,r(Se,{modelValue:a.value.furnanceId,"onUpdate:modelValue":u[4]||(u[4]=I=>a.value.furnanceId=I)},null,8,["modelValue"])]),f.value?(S(),x("div",pr,[vr,r(re,{modelValue:a.value.receiptId,"onUpdate:modelValue":u[5]||(u[5]=I=>a.value.receiptId=I),furnanceId:a.value.furnanceId},null,8,["modelValue","furnanceId"])])):(S(),x("div",Or,[kr,r(re,{disabled:"",modelValue:a.value.receiptId,"onUpdate:modelValue":u[6]||(u[6]=I=>a.value.receiptId=I),furnanceId:a.value.furnanceId},null,8,["modelValue","furnanceId"])]))]),y("div",fr,[wr,r(e(U),{onClick:W,icon:e(R).PLUS,class:"p-button-rounded p-button-outlined mx-1"},null,8,["icon"]),r(Ne,{selectedCustomerOrder:g.value,workOrderItem:a.value.workOrderItems,dialogType:o.workOrderFormType},null,8,["selectedCustomerOrder","workOrderItem","dialogType"])]),a.value.workOrderStatusId>=50?(S(),x("div",Ir,[y("label",{onClick:u[7]||(u[7]=I=>h())},"Seviye 2 Verileri \u0130\xE7in T\u0131klay\u0131n\u0131z"),r(Ye,{modelValue:c.value,"onUpdate:modelValue":u[8]||(u[8]=I=>c.value=I),workOrderId:o.workOrderId},null,8,["modelValue","workOrderId"])])):E("",!0)]),r(qe,{visible:w.value,"onUpdate:visible":u[9]||(u[9]=I=>w.value=I),workOrderItem:a.value.workOrderItems,workOrderId:o.workOrderId,dialogType:o.workOrderFormType,onSelectedCustomerOrderItem:l},null,8,["visible","workOrderItem","workOrderId","dialogType"])],64))}};var gr=Y(yr,[["__scopeId","data-v-754521fe"]]);const br={name:"WorkOrderDialog",props:["modelValue","dialogType","workOrderModel","workOrderId"],emits:["update:modelValue","saveWorkOrder","refresh"],setup(d,{emit:n}){const t=d,o=p(!0),i=p();function a(s){s==!0?o.value=!1:o.value=!0}function O(){i.value.saveItem()}return D(o,()=>{n("refresh",o.value)}),(s,w)=>(S(),F(e(le),{header:"\u0130\u015F Emri",visible:o.value,"onUpdate:visible":w[2]||(w[2]=g=>o.value=g),modal:!1,class:"dialogWork",position:"right",breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"65rem"},onHide:w[3]||(w[3]=g=>a(!0))},{footer:b(()=>[r(e(U),{label:"\u0130ptal",icon:"pi pi-times",onClick:w[0]||(w[0]=g=>a(!0)),class:"p-button-text"}),r(e(U),{label:"Kaydet",icon:"pi pi-save",onClick:w[1]||(w[1]=g=>O()),autofocus:""})]),default:b(()=>[r(gr,{ref_key:"workOrderFormComponent",ref:i,workOrderFormType:t.dialogType,workOrderId:t.workOrderId,showDialogAndSidebar:o.value,onCloseWorkOrder:a},null,8,["workOrderFormType","workOrderId","showDialogAndSidebar"])]),_:1},8,["visible"]))}};var hr=Y(br,[["__scopeId","data-v-5205d6c7"]]);const _r=["onClick"],Sr={class:"p-menuitem-text mr-2"},Vr={name:"WorkOrderTabMenu",props:["counts"],emits:["update:modelValue"],setup(d,{emit:n}){const t=d,o=p([]),i=p();return D(i,()=>{n("update:modelValue",i.value)}),G(()=>{o.value.push({label:"Taslak",workOrderStatusId:10,severity:"warning"}),o.value.push({label:"Ba\u015Flamad\u0131",workOrderStatusId:20,severity:"warning"}),o.value.push({label:"Is\u0131l \u0130\u015Flemde",workOrderStatusId:30,severity:"success"}),o.value.push({label:"Durduruldu",workOrderStatusId:40,severity:"danger"}),o.value.push({label:"Tamamland\u0131",workOrderStatusId:50,severity:"success"}),o.value.push({label:"Kapand\u0131",workOrderStatusId:60,severity:"info"})}),(a,O)=>o.value.length?(S(),F(e(Ce),{key:0,model:o.value,activeIndex:i.value,"onUpdate:activeIndex":O[0]||(O[0]=s=>i.value=s)},{item:b(({item:s})=>[y("a",{onClick:w=>i.value=s.workOrderStatusId,class:We("p-menuitem-link "+(i.value==s.workOrderStatusId?"tp-highlight":" "))},[y("div",Sr,L(s.label),1),t.counts[s.workOrderStatusId.toString()]!=0?Ve((S(),F(e(Te),{key:0,severity:s.severity,value:t.counts[s.workOrderStatusId.toString()]},null,8,["severity","value"])),[[De,t.counts[s.workOrderStatusId.toString()]]]):E("",!0)],10,_r)]),_:1},8,["model","activeIndex"])):E("",!0)}},Dr=y("h3",null,"\u0130\u015F Emirleri",-1),Tr={name:"WorkOrderTable",props:["modelValue"],setup(d){const n=j(),t=p([]),o=p([]),i=p(!1),a=p(V.ADD),O=p([]),s=p(10),w=p(30),g=p({global:{value:"",matchMode:"contains"},workOrderId:{value:"",matchMode:"contains"},workOrderNumber:{value:"",matchMode:"contains"},name:{value:"",matchMode:"contains"}}),f=p({Page:0,First:0,Rows:20,SortField:"workOrderId",SortOrder:1,ActiveIndexWorkOrder:s.value,filters:g.value});D(s,async()=>{f.value.ActiveIndexWorkOrder=s.value,W(),O.value=await n.getWorkOrderStatusCount()},{immediate:!0});function c(){a.value=V.ADD,i.value=!0}async function l(T){let _=(await n.checkWorkOrder(T.workOrderId)).value;Fe(T.name+"Adl\u0131 \u0130\u015F Emri Silinecek. \u0130\u015Flemde Olan \u0130\u015F Emri Kalem Say\u0131s\u0131 : "+_,async()=>{await n.deleteWorkOrder(T.workOrderId),W()})}function v(T){o.value=T,a.value=V.UPD,i.value=!0}async function W(){t.value=await n.getAll(f.value)}function h(T){f.value=T,W()}function m(T){f.value.SortField=T.sortField,f.value.SortOrder=T.sortOrder,W()}function u(T){T==!1&&(i.value=!1),W()}function I(){f.value.filters=g.value,W()}return D(g,()=>{I()}),(T,C)=>(S(),x(H,null,[r(e(Ae)),r(Vr,{class:"dataTable",modelValue:s.value,"onUpdate:modelValue":C[0]||(C[0]=_=>s.value=_),counts:O.value},null,8,["modelValue","counts"]),r(oe,null,{default:b(()=>[r(e(xe),{class:"mb-4"}),r(e(K),{lazy:!0,loading:e(n).workOrderLoading.value,class:"dataTable",value:t.value,paginator:!0,rows:20,ref:"dt_record",paginatorPosition:"top",onPage:C[3]||(C[3]=_=>h(_)),onSort:C[4]||(C[4]=_=>m(_)),filters:g.value,"onUpdate:filters":C[5]||(C[5]=_=>g.value=_),filterDisplay:"row",sortOrder:1,totalRecords:w.value},{paginatorstart:b(()=>[Dr]),paginatorend:b(()=>[r(e(U),{label:"\u0130\u015F Emri Ekle",icon:e(R).PLUS,class:"p-button-success p-button-rounded mr-2",onClick:C[1]||(C[1]=_=>c())},null,8,["icon"]),r(e(U),{icon:e(R).REFRESH,class:"p-button-rounded p-button-outlined mx-2",onClick:C[2]||(C[2]=_=>T.fetchWorkOrder())},null,8,["icon"])]),empty:b(()=>[r($e)]),default:b(()=>[r(e(k),{field:"workOrderId",header:"\u0130\u015F Emri Id",sortable:!0},{filter:b(({filterModel:_,filterCallback:$})=>[r(e(P),{type:"text",modelValue:_.value,"onUpdate:modelValue":N=>_.value=N,onKeydown:X(N=>$(),["enter"]),class:"p-column-filter",placeholder:"Ara..."},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),r(e(k),{field:"workOrderStatusName",header:"\u0130\u015F Emri Durumu",sortable:""}),r(e(k),{field:"workOrderNumber",header:"\u0130\u015F Emri Numaras\u0131",sortable:""},{filter:b(({filterModel:_,filterCallback:$})=>[r(e(P),{type:"text",modelValue:_.value,"onUpdate:modelValue":N=>_.value=N,onKeydown:X(N=>$(),["enter"]),class:"p-column-filter",placeholder:"Ara..."},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),r(e(k),{field:"name",header:"\u0130\u015F Emri Ad\u0131",sortable:!0},{filter:b(({filterModel:_,filterCallback:$})=>[r(e(P),{type:"text",modelValue:_.value,"onUpdate:modelValue":N=>_.value=N,onKeydown:X(N=>$(),["enter"]),class:"p-column-filter",placeholder:"Ara..."},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),r(e(k),{field:"remark",header:"\u0130\u015F Emri A\xE7\u0131klamas\u0131",sortable:""}),r(e(k),{field:"createdDate",header:"Olu\u015Fturma Tarihi",sortable:!0},{body:b(_=>{var $;return[z(L(e(Ue)(($=_.data)==null?void 0:$.createdDate)),1)]}),_:1}),r(e(k),{exportable:!1,style:{"min-width":"8rem"}},{body:b(_=>[r(e(U),{icon:e(R).PENCIL,class:"p-button-primary p-button-rounded p-button-outlined mr-2",onClick:$=>v(_.data)},null,8,["icon","onClick"]),r(e(U),{icon:e(R).TRASH,class:"p-button-rounded p-button-danger p-button-outlined mr-2",onClick:$=>l(_.data)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["loading","value","filters","totalRecords"])]),_:1}),i.value?(S(),F(hr,{key:0,dialogType:a.value,workOrderId:o.value.workOrderId,onRefresh:u},null,8,["dialogType","workOrderId"])):E("",!0)],64))}},Ar={name:"WorkOrderPage",setup(d){return(n,t)=>(S(),F(oe,null,{default:b(()=>[r(Tr)]),_:1}))}};export{Ar as default};
