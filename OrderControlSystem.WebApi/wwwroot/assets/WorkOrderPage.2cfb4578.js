import{y as te,b as i,w as C,o as h,a as M,f as e,z as le,x as A,B as oe,C as de,D,c as W,e as r,i as b,m,E as G,G as N,s as U,P,j as B,H as se,F as H,_ as q,I as ue,p as ne,J as ie,K as ce,k as g,l as z,L as me,M as Z,N as J,d as X,O as ee,Q as re,R as pe,h as F,S as ve,T as Oe,U as fe,V as ke,W as we,X as Ie,Y as ye,Z as ge,$ as _e,a0 as be,a1 as he,A as Se,a2 as Q,a3 as Ve,n as ae,a4 as De}from"./index.aafe1f7a.js";const Y={__name:"ReceiptsDropdown",props:["furnanceId"],emits:["update:modelValue"],setup(u,{emit:f}){const l=u,t=te(),s=i(),a=i(!1),p=i([]),d=i([]);C(()=>l.furnanceId,async()=>{a.value=!0,await S()}),C(s,()=>{f("update:modelValue",s.value)});async function S(){d.value=[],p.value=await t.getReceiptsList();for(var O=0;O<p.value.length;O++)p.value[O].furnance.furnanceId==l.furnanceId&&d.value.push(p.value[O])}return(O,k)=>(h(),M(e(le),{modelValue:s.value,"onUpdate:modelValue":k[0]||(k[0]=n=>s.value=n),options:d.value,optionLabel:"name",optionValue:"receiptId",placeholder:"Re\xE7ete Se\xE7iniz",showClear:a.value},null,8,["modelValue","options","showClear"]))}},j=()=>{i();const u=i(!1);async function f(n){var o;try{return u.value=!0,(o=(await A.get("workOrder/GetWorkOrder?workOrderId="+n)).data)==null?void 0:o.value}catch(v){console.log(v)}finally{u.value=!1}}async function l(n){try{u.value=!0,await A.post("workorder/AddWorkOrder",n)}catch(o){console.log(o)}finally{u.value=!1}}async function t(n){var o;try{u.value=!0;let v=oe(n);return(o=(await A.post("workOrder/GetWorkOrderList",{statusId:n})).data)==null?void 0:o.value}catch(v){console.log(v)}finally{u.value=!1}}async function s(n){try{u.value=!0,await A.post("workOrder/UpdateWorkOrder",n)}catch(o){console.log(o)}finally{u.value=!1}}async function a(){var n;try{u.value=!0;let o;return o=await A.get("workOrder/GetWorkOrderStatus"),(n=o.data)==null?void 0:n.result}catch(o){console.log(o)}finally{u.value=!1}}async function p(n){try{u.value=!0,await A.post("workOrder/DeleteWorkOrder?workOrderId="+n)}catch(o){console.log(o)}finally{u.value=!1}}async function d(){var n;try{return u.value=!0,(n=(await A.get("workOrder/GetWorkOrderStatusCount")).data)==null?void 0:n.result.value}catch(o){console.log(o)}finally{u.value=!1}}async function S(n){try{return(await A.post("workOrder/CheckWorkOrder",{workOrderId:n})).data}catch(o){console.log(o)}}async function O(n){var o;try{let v=await A.get("workOrder/GetLevelTwoData?workOrderId="+n);return console.log(v.data),(o=v.data)==null?void 0:o.value}catch(v){console.log(v)}}async function k(n){var o;try{return(o=(await A.post("workOrder/GetWorkOrderWithDetailList",de(n))).data)==null?void 0:o.value}catch(v){console.log(v)}}return{useWorkOrderApi:j,getWorkOrder:f,addWorkOrder:l,getWorkOrderList:t,updateWorkOrder:s,deleteWorkOrder:p,getWorkOrderStatus:a,getWorkOrderStatusCount:d,checkWorkOrder:S,workOrderLoading:u,levelTwoGetWorkOrderData:O,getAll:k}},Ce={__name:"SelectedCustomerOrderTable",props:["modelValue","selectedCustomerOrder","workOrderItem","dialogType"],emits:["update:modelValue"],setup(u,{emit:f}){const l=u,t=i(!1),s=i([]),a=i("workOrderItem"),p=i([]),d=i(!1);function S(k){d.value=!0,s.value=k}C(()=>l.selectedCustomerOrder,()=>{var n;let k=p.value.findIndex(o=>{var v;return o.customerOrderItemId==((v=l.selectedCustomerOrder)==null?void 0:v.customerOrderItemId)});p.value.splice(k,1),console.log(l.selectedCustomerOrder);for(let o=0;o<((n=l.selectedCustomerOrder)==null?void 0:n.length);o++)p.value.push(l.selectedCustomerOrder[o])}),C(()=>l.workOrderItem,()=>{var k;if(l.dialogType==D.ADD&&(p.value=[]),l.dialogType==D.UPD){p.value=[];for(let n=0;n<((k=l.workOrderItem)==null?void 0:k.length);n++)p.value.push(l.workOrderItem[n].customerOrderItem);console.log("UPD customerOrder: ",p.value)}f("update:modelValue",t.value)}),C(()=>l.modelValue,()=>{t.value=l.modelValue,f("update:modelValue",t.value)});function O(k){if(k.workOrderItemStatusId>=50)return"tp-cusDetTable-bg"}return(k,n)=>(h(),W(H,null,[r(e(B),{value:p.value,rowGroupMode:"subheader",groupRowsBy:"customerOrderItemId",sortMode:"single",sortField:"customerOrderItemId",sortOrder:1,scrollable:"",responsiveLayout:"scroll",scrollHeight:"400px",rowClass:O},{default:b(()=>[r(e(m),{field:"customer.companyName",header:"M\xFC\u015Fteri Ad\u0131"},{body:b(o=>{var v;return[G(N((v=o.data)==null?void 0:v.customer.companyName),1)]}),_:1}),r(e(m),{field:"customerOrderId",header:"M\xFC\u015Fteri Sipari\u015F Numaras\u0131"},{body:b(o=>{var v;return[G(N((v=o.data)==null?void 0:v.customerOrderItemId),1)]}),_:1}),r(e(m),{field:"customerOrderItemStatus",header:"M\xFC\u015Fteri Sipari\u015F Durumu"},{body:b(o=>{var v;return[G(N((v=o.data)==null?void 0:v.customerOrderItemStatus.name),1)]}),_:1}),r(e(m),{field:"drawingNo",header:"Sipari\u015F \xC7izim Numaras\u0131"},{body:b(o=>{var v;return[G(N((v=o.data)==null?void 0:v.drawingNo),1)]}),_:1}),r(e(m),{header:"Raporlar"},{body:b(o=>[r(e(U),{icon:e(P).CHART_BAR,class:"p-button-info p-button-rounded p-button-outlined mr-2",onClick:v=>S(o.data)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["value"]),r(se,{modelValue:d.value,"onUpdate:modelValue":n[0]||(n[0]=o=>d.value=o),reportDialogType:a.value,workOrderItemId:s.value.workOrderItemId},null,8,["modelValue","reportDialogType","workOrderItemId"])],64))}},Te=()=>{async function u(t){try{await A.post("workOrderItem/DeleteWorkOrderItem?workOrderItemId="+t)}catch(s){console.log(s)}}async function f(t){try{console.log("workOrder\u0131TEM : ",t[0]),await A.post("workOrderItem/AddWorkOrderItem",t[0])}catch(s){console.log(s)}}async function l(){var s;try{var t=await A.get("workOrderItem/fetchWorkOrderItem");return(s=t.data)==null?void 0:s.value}catch(a){console.log(a)}}return{deleteWorkOrderItem:u,addWorkOrderItem:f,fetchWorkOrderItem:l}};const K=u=>(Z("data-v-fe97e845"),u=u(),J(),u),We=K(()=>g("h3",null,"Se\xE7ilen M\xFC\u015Fteri Sipari\u015Fi",-1)),Ae={class:"col-12 sm:col-6"},xe=K(()=>g("h3",{style:{}},"M\xFC\u015Fteri Sipari\u015F Numaras\u0131 :",-1)),$e={style:{padding:"1rem","font-size":"small"}},Ue={class:"tp-divtag"},Fe=K(()=>g("h3",null,"M\xFC\u015Fteri Sipari\u015F Se\xE7im Ekran\u0131",-1)),Le={class:"p-input-icon-left"},Ne=K(()=>g("i",{class:"pi pi-search"},null,-1)),Me={class:"orders-subtable"},Ee=K(()=>g("h5",null,"Sipari\u015F Detaylar\u0131",-1)),Re={__name:"WorkOrderSideBar",props:["modelValue","dialogType","workOrderItem","workOrderId"],emits:["update:modelValue","selectedCustomerOrderItem","selectedTable"],setup(u,{emit:f}){const l=u,t=Te(),s=ue(),a=i(!0),p=i([]),d=i([{selectedCustomerOrderItem:[]}]),S=i([]),O=i({global:{value:"",matchMode:ne.CONTAINS}});i([]);async function k(){if(l.dialogType==D.ADD&&f("selectedCustomerOrderItem",v()),l.dialogType==D.UPD){let y=Object.assign({},v());await t.addWorkOrderItem(y)}}C(()=>l.workOrderItem,async()=>{if(f("update:modelValue",a.value),d.value=await s.getCustomerOrderList(11),l.dialogType==D.ADD){d.value=[],d.value=await s.getCustomerOrderList(11);let y=[];y=d.value,d.value=[];for(let c=0;c<y.length;c++)y[c].customerOrderStatusId>30||d.value.push(y[c])}l.dialogType==D.UPD&&(d.value.selectedCustomerOrderItem=l.workOrderItem)},{immediate:!0}),C(()=>l.modelValue,()=>{a.value=l.modelValue,f("update:modelValue",a.value)});function n(y){if(console.log("e",y),y.customerOrderItemStatusId>=40)return"tp-dataTag-bg"}const o=y=>{S.value.push(y.data)};function v(){let y=i([]);if(l.dialogType==D.ADD)return d.value.forEach(c=>{var w;(w=c.selectedCustomerOrderItem)==null||w.forEach(I=>{y.value.push({...I,workOrderItemStatusId:20,name:c.name,remark:c.remark,customerOrderId:c.customerOrderId})})}),console.log(y.value),y.value;if(l.dialogType==D.UPD)return d.value.forEach(c=>{var w;(w=c.selectedCustomerOrderItem)==null||w.forEach(I=>{y.value.push({...I,workOrderItemStatusId:20,name:c.name,remark:c.remark,customerOrderId:c.customerOrderId,workOrderId:l.workOrderId})})}),y.value}async function R(y){console.log("item >>",y);let c=S.value.findIndex(w=>w.customerOrderItemId==y.customerOrderItemId);console.log("index :>> ",c),l.dialogType==D.ADD&&(S.value.splice(c,1),d.value[0].selectedCustomerOrderItem.splice(c,1),f("selectedCustomerOrderItem",d.value.selectedCustomerOrderItem)),l.dialogType==D.UPD&&(S.value.splice(c,1),d.value.selectedCustomerOrderItem.splice(c,1),await t.deleteWorkOrderItem(y.workOrderItemId),console.log("customerOrderModel.value.selectedCustomerOrderItem::>>>",d.value.selectedCustomerOrderItem),f("selectedCustomerOrderItem",d.value.selectedCustomerOrderItem))}return(y,c)=>(h(),M(e(me),{visible:a.value,"onUpdate:visible":c[5]||(c[5]=w=>a.value=w),baseZIndex:1e3,modal:!1,style:{width:"45vw","min-width":"300px"},class:"p-dialog-left"},{default:b(()=>[We,r(e(U),{label:"Se\xE7imi Tamamla",class:"p-button-success",icon:"pi pi-save",onClick:c[0]||(c[0]=w=>k())}),(h(!0),W(H,null,ie(d.value.selectedCustomerOrderItem?d.value.selectedCustomerOrderItem:S.value,w=>(h(),W("div",Ae,[r(e(ce),{severity:"success",class:"mr-10",style:{"font-size":"smaller !important"}},{default:b(()=>[xe,g("div",$e,N(w.customerOrderItemId),1),g("div",Ue,[r(e(U),{class:"tp-buttontag p-button-rounded p-button-danger",onClick:I=>R(w),label:"X"},null,8,["onClick"])])]),_:2},1024)]))),256)),Fe,r(e(B),{value:d.value,loading:e(s).customerOrderLoading.value,expandedRows:p.value,"onUpdate:expandedRows":c[3]||(c[3]=w=>p.value=w),dataKey:"customerOrderId",responsiveLayout:"scroll",filters:O.value,"onUpdate:filters":c[4]||(c[4]=w=>O.value=w),globalFilterFields:["customerOrderItemId","name"]},{expansion:b(w=>[g("div",Me,[Ee,r(e(B),{value:w.data.customerOrderItems,selection:w.data.selectedCustomerOrderItem,"onUpdate:selection":I=>w.data.selectedCustomerOrderItem=I,metaKeySelection:!1,selectionMode:"multiple",dataKey:"customerOrderItemId",responsiveLayout:"scroll",filters:O.value,"onUpdate:filters":c[2]||(c[2]=I=>O.value=I),globalFilterFields:["customerOrderItemId","name"],onRowSelect:o,rowClass:n},{default:b(()=>[r(e(m),{field:"customerOrderItemId",header:"Id",sortable:""}),r(e(m),{field:"customer.companyName",header:"M\xFC\u015Fteri Ad\u0131",sortable:""}),r(e(m),{field:"name",header:"Sipari\u015F Ad\u0131",sortable:""}),r(e(m),{field:"drawingNo",header:"\xC7izim Numaras\u0131",sortable:""}),r(e(m),{field:"pieceNumber",header:"Par\xE7a Numaras\u0131",sortable:""}),r(e(m),{field:"pieceWeight",header:"Par\xE7a A\u011F\u0131rl\u0131\u011F\u0131",sortable:""}),r(e(m),{field:"hrc",header:"\xD6nceki Sertlik(Hrc)",sortable:""}),r(e(m),{field:"hb",header:"\xD6nceki Sertlik(Hb)",sortable:""}),r(e(m),{field:"createDate",header:"Olu\u015Fturma Tarihi",sortable:""}),r(e(m),{field:"materialQuality.name",header:"Malzeme Kalitesi",sortable:""}),r(e(m),{field:"treatmentType.name",header:"\u0130\u015Flem Tipi",sortable:""}),r(e(m),{field:"registrationDate",header:"Kay\u0131t Tarihi",sortable:""})]),_:2},1032,["value","selection","onUpdate:selection","filters"])])]),default:b(()=>[g("span",Le,[Ne,r(e(z),{modelValue:O.value.global.value,"onUpdate:modelValue":c[1]||(c[1]=w=>O.value.global.value=w),placeholder:"Ara..."},null,8,["modelValue"])]),r(e(m),{field:"customerOrderId",header:"Sipari\u015F Numaras\u0131",sortable:""}),r(e(m),{field:"name",header:"Sipari\u015F Detay Ad\u0131",sortable:""}),r(e(m),{field:"customerOrderStatus.name",header:"Sipari\u015F Durumu",sortable:""}),r(e(m),{expander:!0,headerStyle:"width: 3rem"})]),_:1},8,["value","loading","expandedRows","filters"])]),_:1},8,["visible"]))}},Pe=q(Re,[["__scopeId","data-v-fe97e845"]]),ze={__name:"LevelTwoDataTable",props:["workOrderId"],setup(u){const f=u,l=j(),t=i([]);async function s(){t.value=await l.levelTwoGetWorkOrderData(f.workOrderId),console.log("levelTwoWOrkOrderData.value :>> ",t.value)}return X(async()=>{await s()}),ee(()=>{t.value=[]}),(a,p)=>(h(),M(e(B),{value:t.value,responsiveLayout:"scroll"},{default:b(()=>[r(e(m),{field:"name",header:"\u0130\u015F Emri Ad\u0131"}),r(e(m),{field:"ifReferenceSpeed",header:"Akt\xFCel H\u0131z"}),r(e(m),{field:"ifActualSpeed",header:"Akt\xFCel H\u0131z"}),r(e(m),{field:"ifCurrent",header:"Ak\u0131m"}),r(e(m),{field:"ifFreq",header:"Frekans"}),r(e(m),{field:"ifGuc",header:"G\xFC\xE7"}),r(e(m),{field:"ifVoltage",header:"Voltaj"}),r(e(m),{field:"ifPower",header:"G\xFC\xE7(Power)"}),r(e(m),{field:"remarkOperator",header:"Operat\xF6r Notu"})]),_:1},8,["value"]))}},Ge={__name:"LevelTwoDialog",props:["modelValue","workOrderId"],emits:["update:modelValue"],setup(u,{emit:f}){const l=u,t=i(!1);return C(t,async()=>{f("update:modelValue",t.value)}),C(()=>l.modelValue,()=>{t.value=l.modelValue,f("update:modelValue",t.value)}),(s,a)=>(h(),M(e(re),{header:"Seviye 2 Bilgileri",visible:t.value,"onUpdate:visible":a[0]||(a[0]=p=>t.value=p),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"50vw"}},{default:b(()=>[r(ze,{workOrderId:l.workOrderId},null,8,["workOrderId"])]),_:1},8,["visible"]))}};const E=u=>(Z("data-v-ff31af28"),u=u(),J(),u),Be={class:"p-grid p-fluid"},Ke={class:"p-field p-col-12"},He=E(()=>g("label",{for:"workOrderNumber"},"\u0130\u015F Emri Numaras\u0131",-1)),je={key:0,class:"p-error"},Qe={class:"p-field p-col-12"},qe=E(()=>g("label",{for:"Name"},"\u0130\u015F Emri Ad\u0131",-1)),Xe={key:0,class:"p-error"},Ye={class:"p-field p-col-12"},Ze=E(()=>g("label",{for:"remark"},"\u0130\u015F Emri A\xE7\u0131klamas\u0131",-1)),Je={key:0,class:"p-error"},er={class:"grid"},rr={key:0,class:"p-field col",style:{"margin-top":"2rem"}},ar={for:"workOrderStatusId"},tr={class:"p-field col"},lr=E(()=>g("label",{for:"Furnace"},"F\u0131r\u0131n",-1)),or={key:0,class:"p-error"},dr={key:1,class:"p-field col"},sr=E(()=>g("label",{for:"receipts"},"Re\xE7eteler",-1)),ur={key:0,class:"p-error"},nr={key:2,class:"p-field col"},ir=E(()=>g("label",{for:"receipts"},"Re\xE7ete Se\xE7mek \u0130\xE7in F\u0131r\u0131n Se\xE7iniz",-1)),cr={class:"p-field p-col-12"},mr=E(()=>g("label",{for:""},"Se\xE7ilen M\xFC\u015Fteri Sipari\u015Fleri",-1)),pr={key:0,class:"p-field p-col-12",style:{"text-align":"center",color:"yellowgreen"}},vr={__name:"WorkOrderForm",props:["workOrderFormType","showDialogAndSidebar","workOrderModel","workOrderId"],emits:["saveWorkOrder","closeWorkOrder"],setup(u,{expose:f,emit:l}){const t=u,s=i(!1),a=i({workOrderItems:[]}),p=i(!1),d=i([]);i(null);const S=j(),O=i(!1),k=i([]),n=i(!1),o=i(!1);C(()=>t.showDialogAndSidebar,async()=>{O.value=t.showDialogAndSidebar,t.workOrderFormType==D.ADD&&(a.value={}),t.workOrderFormType==D.UPD&&(n.value=!0,a.value=(await S.getWorkOrder(t.workOrderId))[0],a.value.workOrderStatusId==20&&(s.value=!0),d.value=a.value.workOrderItems)},{immediate:!0}),f({saveItem:R}),C(()=>a.value.furnanceId,async()=>{n.value=!0});function v(w){k.value={},k.value=w,console.log("selected : value : ",k.value),a.value.workOrderItems=w}async function R(){if(!a.value.name||!a.value.remark||!a.value.workOrderNumber||!a.value.receiptId||!a.value.furnanceId){p.value=!0,l("closeWorkOrder",!1);return}if(t.workOrderFormType==D.ADD&&(s.value==!0?a.value.workOrderStatusId=20:a.value.workOrderStatusId=10,a.value.createdDate=pe(Date.now()),await S.addWorkOrder(a.value),l("closeWorkOrder",!0)),t.workOrderFormType==D.UPD){console.log("workOrderStatus:",a.value.workOrderStatusId);let w=a.value.workOrderStatusId;a.value.workOrderStatusId>=30?a.value.workOrderStatusId=w:s.value==!0?a.value.workOrderStatusId=20:a.value.workOrderStatusId=10,await S.updateWorkOrder(a.value),l("closeWorkOrder",!0)}}function y(){(O.value=!0)?console.log("sidebar zaten a\xE7\u0131k"):O.value=!0}function c(){o.value=!0}return(w,I)=>(h(),W(H,null,[g("div",Be,[g("div",Ke,[He,r(e(z),{modelValue:a.value.workOrderNumber,"onUpdate:modelValue":I[0]||(I[0]=V=>a.value.workOrderNumber=V)},null,8,["modelValue"]),p.value&&!a.value.workOrderNumber?(h(),W("small",je,"L\xFCtfen De\u011Fer Giriniz")):F("",!0)]),g("div",Qe,[qe,r(e(z),{modelValue:a.value.name,"onUpdate:modelValue":I[1]||(I[1]=V=>a.value.name=V)},null,8,["modelValue"]),p.value&&!a.value.name?(h(),W("small",Xe,"L\xFCtfen De\u011Fer Giriniz")):F("",!0)]),g("div",Ye,[Ze,r(ve,{modelValue:a.value.remark,"onUpdate:modelValue":I[2]||(I[2]=V=>a.value.remark=V)},null,8,["modelValue"]),p.value&&!a.value.remark?(h(),W("small",Je,"L\xFCtfen De\u011Fer Giriniz")):F("",!0)]),g("div",er,[a.value.workOrderStatusId<=20||t.workOrderFormType!=e(D).UPD?(h(),W("div",rr,[g("label",ar,"\u0130\u015F Emri Durumu : "+N(s.value?"Ba\u015Flamad\u0131":"Taslak"),1),r(e(Oe),{style:{"margin-left":"1rem"},modelValue:s.value,"onUpdate:modelValue":I[3]||(I[3]=V=>s.value=V),binary:!0},null,8,["modelValue"])])):F("",!0),g("div",tr,[lr,r(fe,{modelValue:a.value.furnanceId,"onUpdate:modelValue":I[4]||(I[4]=V=>a.value.furnanceId=V)},null,8,["modelValue"]),p.value&&!a.value.furnaceId?(h(),W("small",or,"L\xFCtfen De\u011Fer Giriniz")):F("",!0)]),n.value?(h(),W("div",dr,[sr,r(Y,{modelValue:a.value.receiptId,"onUpdate:modelValue":I[5]||(I[5]=V=>a.value.receiptId=V),furnanceId:a.value.furnanceId},null,8,["modelValue","furnanceId"]),p.value&&!a.value.receiptId?(h(),W("small",ur,"L\xFCtfen De\u011Fer Giriniz")):F("",!0)])):(h(),W("div",nr,[ir,r(Y,{disabled:"",modelValue:a.value.receiptId,"onUpdate:modelValue":I[6]||(I[6]=V=>a.value.receiptId=V),furnanceId:a.value.furnanceId},null,8,["modelValue","furnanceId"])]))]),g("div",cr,[mr,r(e(U),{onClick:y,icon:e(P).PLUS,class:"p-button-rounded p-button-outlined mx-1"},null,8,["icon"]),r(Ce,{selectedCustomerOrder:k.value,workOrderItem:d.value,dialogType:t.workOrderFormType},null,8,["selectedCustomerOrder","workOrderItem","dialogType"])]),a.value.workOrderStatusId>=50?(h(),W("div",pr,[g("label",{onClick:I[7]||(I[7]=V=>c())},"Seviye 2 Verileri \u0130\xE7in T\u0131klay\u0131n\u0131z"),r(Ge,{modelValue:o.value,"onUpdate:modelValue":I[8]||(I[8]=V=>o.value=V),workOrderId:t.workOrderId},null,8,["modelValue","workOrderId"])])):F("",!0)]),r(Pe,{visible:O.value,"onUpdate:visible":I[9]||(I[9]=V=>O.value=V),workOrderItem:d.value,workOrderId:t.workOrderId,dialogType:t.workOrderFormType,onSelectedCustomerOrderItem:v},null,8,["visible","workOrderItem","workOrderId","dialogType"])],64))}},Or=q(vr,[["__scopeId","data-v-ff31af28"]]);const fr={__name:"WorkOrderDialog",props:["modelValue","dialogType","workOrderModel","workOrderId"],emits:["update:modelValue","saveWorkOrder"],setup(u,{emit:f}){const l=u,t=i(!1),s=i();function a(){t.value=!1}function p(S){S==!0?t.value=!1:t.value=!0}function d(){l.dialogType==D.ADD&&s.value.saveItem(),l.dialogType==D.UPD&&s.value.saveItem()}return C(()=>t.value,async()=>{f("update:modelValue",t.value)}),C(()=>l.modelValue,()=>{t.value=l.modelValue,f("update:modelValue",t.value)}),(S,O)=>(h(),M(e(re),{header:"\u0130\u015F Emri",visible:t.value,"onUpdate:visible":O[2]||(O[2]=k=>t.value=k),modal:!1,class:"dialogWork",position:"right",breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"80rem"}},{footer:b(()=>[r(e(U),{label:"\u0130ptal",icon:"pi pi-times",onClick:O[0]||(O[0]=k=>a()),class:"p-button-text"}),r(e(U),{label:"Kaydet",icon:"pi pi-save",onClick:O[1]||(O[1]=k=>d()),autofocus:""})]),default:b(()=>[r(Or,{ref_key:"workOrderFormComponent",ref:s,workOrderFormType:l.dialogType,workOrderId:l.workOrderId,showDialogAndSidebar:t.value,onCloseWorkOrder:p},null,8,["workOrderFormType","workOrderId","showDialogAndSidebar"])]),_:1},8,["visible"]))}},kr=q(fr,[["__scopeId","data-v-323750ff"]]),wr=["onClick"],Ir={class:"p-menuitem-text mr-2"},yr={__name:"WorkOrderTabMenu",props:["counts"],emits:["update:modelValue"],setup(u,{emit:f}){const l=u,t=i([]),s=i();return C(s,()=>{f("update:modelValue",s.value)}),X(()=>{t.value.push({label:"Taslak",workOrderStatusId:10,severity:"warning"}),t.value.push({label:"Ba\u015Flamad\u0131",workOrderStatusId:20,severity:"warning"}),t.value.push({label:"Is\u0131l \u0130\u015Flemde",workOrderStatusId:30,severity:"success"}),t.value.push({label:"Durduruldu",workOrderStatusId:40,severity:"danger"}),t.value.push({label:"Tamamland\u0131",workOrderStatusId:50,severity:"success"}),t.value.push({label:"Kapand\u0131",workOrderStatusId:60,severity:"info"})}),(a,p)=>t.value.length?(h(),M(e(ge),{key:0,model:t.value,activeIndex:s.value,"onUpdate:activeIndex":p[0]||(p[0]=d=>s.value=d)},{item:b(({item:d})=>[g("a",{onClick:S=>s.value=d.workOrderStatusId,class:ke("p-menuitem-link "+(s.value==d.workOrderStatusId?"tp-highlight":" "))},[g("div",Ir,N(d.label),1),l.counts[d.workOrderStatusId.toString()]!=0?we((h(),M(e(Ie),{key:0,severity:d.severity,value:l.counts[d.workOrderStatusId.toString()]},null,8,["severity","value"])),[[ye,l.counts[d.workOrderStatusId.toString()]]]):F("",!0)],10,wr)]),_:1},8,["model","activeIndex"])):F("",!0)}},gr=g("h3",null,"\u0130\u015F Emirleri",-1),_r={__name:"WorkOrderTable",props:["modelValue"],setup(u){const f=j(),l=i([]),t=i([]),s=i(!1),a=i(D.ADD),p=i([]),d=i(10),S=i(30),O=i({global:{value:"",matchMode:"contains"},workOrderId:{value:"",matchMode:"contains"},workOrderNumber:{value:"",matchMode:"contains"},name:{value:"",matchMode:"contains"}}),k=i({Page:0,First:0,Rows:20,SortField:"workOrderId",SortOrder:1,ActiveIndexWorkOrder:d.value,filters:O.value});C(s,async()=>{await o()}),C(d,async()=>{k.value.ActiveIndexWorkOrder=d.value,o(),p.value=await f.getWorkOrderStatusCount()},{immediate:!0});function n(){a.value=D.ADD,s.value=!0}async function o(){l.value=await f.getAll(k.value)}async function v(x){let _=(await f.checkWorkOrder(x.workOrderId)).value;De(x.name+"Adl\u0131 \u0130\u015F Emri Silinecek. \u0130\u015Flemde Olan \u0130\u015F Emri Kalem Say\u0131s\u0131 : "+_,async()=>{await f.deleteWorkOrder(x.workOrderId),await o()})}function R(x){t.value=x,a.value=D.UPD,s.value=!0}async function y(){l.value=await f.getAll(k.value)}function c(x){k.value=x,y()}async function w(x){k.value.SortField=x.sortField,k.value.SortOrder=x.sortOrder,await y()}function I(){k.value.filters=O.value,y()}C(O,()=>{I()}),X(async()=>{await y()});const V=_e(()=>{setInterval(async function(){await y()},5e4)});return ee(async()=>{clearInterval(V)}),(x,T)=>(h(),W(H,null,[r(e(be)),r(yr,{class:"dataTable",modelValue:d.value,"onUpdate:modelValue":T[0]||(T[0]=_=>d.value=_),counts:p.value},null,8,["modelValue","counts"]),r(ae,null,{default:b(()=>[r(e(he),{class:"mb-4"}),r(e(B),{lazy:!0,loading:e(f).workOrderLoading.value,class:"dataTable",value:l.value,paginator:!0,rows:20,ref:"dt_record",paginatorPosition:"top",onPage:T[3]||(T[3]=_=>c(_)),onSort:T[4]||(T[4]=_=>w(_)),filters:O.value,"onUpdate:filters":T[5]||(T[5]=_=>O.value=_),filterDisplay:"row",sortOrder:1,totalRecords:S.value},{paginatorstart:b(()=>[gr]),paginatorend:b(()=>[r(e(U),{label:"\u0130\u015F Emri Ekle",icon:e(P).PLUS,class:"p-button-success p-button-rounded mr-2",onClick:T[1]||(T[1]=_=>n())},null,8,["icon"]),r(e(U),{icon:e(P).REFRESH,class:"p-button-rounded p-button-outlined mx-2",onClick:T[2]||(T[2]=_=>o())},null,8,["icon"])]),empty:b(()=>[r(Se)]),default:b(()=>[r(e(m),{field:"workOrderId",header:"\u0130\u015F Emri Id",sortable:!0},{filter:b(({filterModel:_,filterCallback:$})=>[r(e(z),{type:"text",modelValue:_.value,"onUpdate:modelValue":L=>_.value=L,onKeydown:Q(L=>$(),["enter"]),class:"p-column-filter",placeholder:"Ara..."},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),r(e(m),{field:"workOrderStatusName",header:"\u0130\u015F Emri Durumu",sortable:""}),r(e(m),{field:"workOrderNumber",header:"\u0130\u015F Emri Numaras\u0131",sortable:""},{filter:b(({filterModel:_,filterCallback:$})=>[r(e(z),{type:"text",modelValue:_.value,"onUpdate:modelValue":L=>_.value=L,onKeydown:Q(L=>$(),["enter"]),class:"p-column-filter",placeholder:"Ara..."},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),r(e(m),{field:"name",header:"\u0130\u015F Emri Ad\u0131",sortable:!0},{filter:b(({filterModel:_,filterCallback:$})=>[r(e(z),{type:"text",modelValue:_.value,"onUpdate:modelValue":L=>_.value=L,onKeydown:Q(L=>$(),["enter"]),class:"p-column-filter",placeholder:"Ara..."},null,8,["modelValue","onUpdate:modelValue","onKeydown"])]),_:1}),r(e(m),{field:"remark",header:"\u0130\u015F Emri A\xE7\u0131klamas\u0131",sortable:""}),r(e(m),{field:"createdDate",header:"Olu\u015Fturma Tarihi",sortable:!0},{body:b(_=>{var $;return[G(N(e(Ve)(($=_.data)==null?void 0:$.createdDate)),1)]}),_:1}),r(e(m),{exportable:!1,style:{"min-width":"8rem"}},{body:b(_=>[r(e(U),{icon:e(P).PENCIL,class:"p-button-primary p-button-rounded p-button-outlined mr-2",onClick:$=>R(_.data)},null,8,["icon","onClick"]),r(e(U),{icon:e(P).TRASH,class:"p-button-rounded p-button-danger p-button-outlined mr-2",onClick:$=>v(_.data)},null,8,["icon","onClick"])]),_:1})]),_:1},8,["loading","value","filters","totalRecords"])]),_:1}),r(kr,{modelValue:s.value,"onUpdate:modelValue":T[6]||(T[6]=_=>s.value=_),dialogType:a.value,workOrderId:t.value.workOrderId},null,8,["modelValue","dialogType","workOrderId"])],64))}},hr={__name:"WorkOrderPage",setup(u){return(f,l)=>(h(),M(ae,null,{default:b(()=>[r(_r)]),_:1}))}};export{hr as default};
